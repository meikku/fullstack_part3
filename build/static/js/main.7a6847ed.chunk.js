(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=(t(20),t(2)),l=function(e){var n=e.handleQuery;return r.a.createElement("div",null,r.a.createElement("form",null,"filter shown with ",r.a.createElement("input",{query:"text",onChange:n})))},i=t(4),s=t(3),m=t.n(s),f="/api/persons",d=function(){return m.a.get(f).then((function(e){return e.data}))},b=function(e){return m.a.post(f,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},E=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.error,t=e.setError,a=e.setMessage,o=e.setNewName,u=e.setNewNumber,c=e.setPersons,l=e.newName,s=e.newNumber,m=e.persons,f=e.handleNameChange,d=e.handleNumberChange,h=function(e,r){if(console.log("error = ",n),window.confirm(" ".concat(l," is already added to phonebook, replace the old number with a new one?"))){var s=m.find((function(e){return e.name===l})),f=Object(i.a)(Object(i.a)({},s),{},{number:r});E(s.id,f).then((function(e){c(m.map((function(n){return n.id!==s.id?n:e}))),o(""),u("")})).catch((function(e){t(!0),a("Information of '".concat(l,"' has already been removed from server")),setTimeout((function(){a(null)}),5e3),c(m.filter((function(e){return e.id!==s.id}))),o(""),u("")}))}};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:l,number:s};m.some((function(e){return e.name===l}))?h(n,s):b(n).then((function(e){t(!1),c(m.concat(e)),a("added '".concat(e.name,"' ")),setTimeout((function(){a(null)}),5e3),o(""),u("")}))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:l,onChange:f})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:s,onChange:d})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.persons,t=e.setPersons,a=e.newQuery,o=e.personsToShow;o=a?n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})):n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a=e.name,r=e.id,console.log("name = ",a),console.log("id =",r),void(window.confirm("Delete '".concat(a,"' ?"))&&h(r).then(t(n.filter((function(e){return e.id!==r})))));var a,r}},"delete"))}))))},w=function(e){var n=e.message,t=e.error;return null===n?null:!0===t?r.a.createElement("div",{className:"error"},n):!1===t?r.a.createElement("div",{className:"info"},n):void 0},g=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),h=b[0],E=b[1],g=Object(a.useState)(""),N=Object(c.a)(g,2),j=N[0],O=N[1],S=Object(a.useState)(""),y=Object(c.a)(S,2),C=y[0],k=y[1],P=Object(a.useState)(null),T=Object(c.a)(P,2),D=T[0],Q=T[1],M=Object(a.useState)(!1),x=Object(c.a)(M,2),I=x[0],J=x[1];Object(a.useEffect)((function(){d().then((function(e){o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h3",null,"Phonebook"),r.a.createElement(w,{message:D,error:I}),r.a.createElement(l,{handleQuery:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(p,{error:I,setError:J,message:D,setMessage:Q,setNewName:m,setNewNumber:E,setPersons:o,newName:s,newNumber:h,persons:t,handleNameChange:function(e){e.preventDefault(),m(e.target.value)},handleNumberChange:function(e){e.preventDefault(),E(e.target.value)}}),r.a.createElement("h3",null,"Numbers "),r.a.createElement(v,{persons:t,newQuery:j,setPersons:o,personsToShow:C,setPersonsToShow:k}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7a6847ed.chunk.js.map